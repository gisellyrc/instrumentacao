Este código tem como objetivo a implementação de um sistema de monitoramento de fluxo de ar expirado de um paciente, utilizando um sensor de fluxo conectado a um ESP32. Ele realiza a medição de parâmetros respiratórios importantes, como a Capacidade Vital Forçada (CVF), Fluxo Expiratório Forçado Máximo (FEF_max), Fluxo Expiratório Forçado Médio (FEF_med), Tempo de Expiração Forçada (TEF) e Volume Expiratório Forçado no 1º Segundo (VEF_1), com o intuito de auxiliar no diagnóstico e monitoramento de doenças respiratórias.
O ESP32, conectado à rede Wi-Fi, realiza a coleta de dados do sensor de fluxo (através de pulsos gerados pela passagem de ar) e calcula, em intervalos de 1 segundo, a taxa de fluxo expirado. Esses dados são então acumulados para determinar o volume de ar expirado, a taxa máxima de fluxo, a média de fluxo durante a medição, entre outros parâmetros.
Ao finalizar a coleta, o sistema verifica se o fluxo expiratório cessou por um período de 1 segundo, indicando o término da medição. A partir daí, os resultados são enviados em tempo real para o Firebase, um banco de dados em nuvem, onde são armazenados sob a forma de registros associados ao nome do paciente e ao carimbo de data/hora.
Além disso, o código inclui a sincronização automática da hora com um servidor NTP, garantindo que os dados coletados estejam sempre registrados com a data e hora corretas. Essa abordagem permite o monitoramento remoto e facilita o acompanhamento contínuo da função pulmonar do paciente.
